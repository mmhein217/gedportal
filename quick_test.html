<!DOCTYPE html>
<html>

<head>
    <title>Quick Exam Test</title>
    <style>
        body {
            font-family: Arial;
            padding: 20px;
        }

        .success {
            color: green;
            font-weight: bold;
        }

        .error {
            color: red;
            font-weight: bold;
        }

        pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <h1>GED Exam System - Quick Test</h1>

    <h2>Step 1: Login Test</h2>
    <p>Click the button below to login as student1:</p>
    <button onclick="testLogin()">Test Login</button>
    <div id="loginResult"></div>

    <h2>Step 2: Questions API Test</h2>
    <p>After logging in, click to test questions API:</p>
    <button onclick="testQuestions()">Test Questions API</button>
    <div id="questionsResult"></div>

    <h2>Step 3: Start Real Exam</h2>
    <p>If tests pass, click to start actual exam:</p>
    <a href="student/exam.php?subject=math"
        style="display:inline-block; padding:10px 20px; background:#6366f1; color:white; text-decoration:none; border-radius:5px;">Start
        Math Exam</a>

    <script>
        async function testLogin() {
            const result = document.getElementById('loginResult');
            result.innerHTML = '<p>Testing login...</p>';

            try {
                const formData = new FormData();
                formData.append('action', 'login');
                formData.append('username', 'student1');
                formData.append('password', 'password123');
                formData.append('role', 'student');

                const response = await fetch('backend/auth.php', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (data.success) {
                    result.innerHTML = '<p class="success">✅ LOGIN SUCCESS!</p><pre>' + JSON.stringify(data, null, 2) + '</pre>';
                } else {
                    result.innerHTML = '<p class="error">❌ LOGIN FAILED!</p><pre>' + JSON.stringify(data, null, 2) + '</pre>';
                }
            } catch (error) {
                result.innerHTML = '<p class="error">❌ ERROR: ' + error.message + '</p>';
            }
        }

        async function testQuestions() {
            const result = document.getElementById('questionsResult');
            result.innerHTML = '<p>Testing questions API...</p>';

            try {
                const response = await fetch('api/questions.php?subject=math');
                const data = await response.json();

                if (data.success) {
                    result.innerHTML = '<p class="success">✅ QUESTIONS API SUCCESS!</p>' +
                        '<p>Found ' + data.data.questions.length + ' questions</p>' +
                        '<p>Time limit: ' + data.data.time_limit + ' minutes</p>' +
                        '<pre>' + JSON.stringify(data.data.questions[0], null, 2) + '</pre>';
                } else {
                    result.innerHTML = '<p class="error">❌ QUESTIONS API FAILED!</p><pre>' + JSON.stringify(data, null, 2) + '</pre>';
                }
            } catch (error) {
                result.innerHTML = '<p class="error">❌ ERROR: ' + error.message + '</p>';
            }
        }
    </script>
</body>

</html>